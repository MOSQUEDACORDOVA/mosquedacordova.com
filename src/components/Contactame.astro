<a
  href="https://api.whatsapp.com/send?phone=51945692831"
  class="btn_contact"
  target="_blank"
>
  <div class="animacion_rgb sombra_bola_rgb"></div>
  <div class="rounded overflow-hidden boton_rgb">
    <div class="contenedor_borde_rgb">
      <svg class="borde_rgb" xmlns="http://www.w3.org/2000/svg">
        <path id="path" fill="none" stroke="transparent" stroke-width="2"
        ></path>
      </svg>
      <div id="rect" class="animacion_rgb bola_rgb"></div>
      <div
        class="py-3 px-4 contenido_btn_rgb rounded d-flex gap-2 align-items-center justify-content-center"
      >
        <!-- contenido aquí -->
         <svg viewBox="0 0 30 30" width="1.8rem" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.3 7c.3 0 .8 0 1.4.2.6.3 1 .8 1.3 1.6v.1l.3 2.1a21.1 21.1 0 0 1 .1 1.2c0 .7-.3 1.3-.6 1.7l-.8 1-.6.7a13.3 13.3 0 0 0 2.3 2.3l.7-.6 1-.7c.5-.3 1-.6 1.8-.7h.5a20.6 20.6 0 0 1 2.7.4c.9.2 1.4.7 1.7 1.4.2.5.2 1 .2 1.3 0 .7 0 1.4-.3 2.1a3.3 3.3 0 0 1-2.3 1.8c-.7.2-1.2 0-1.8 0-2.6-.7-5.2-2-7.3-4.2a15.1 15.1 0 0 1-4-7.3c-.2-.5-.4-1-.2-1.8.1-.5.4-1 .7-1.4.2-.3.6-.7 1.1-1C10 7 10.6 7 11.3 7Zm7 11.6-.4.2-.3.2-.5.4a11.7 11.7 0 0 0 3.1 1v-.1a1 1 0 0 0 .4-.2V19a179.4 179.4 0 0 0-2.3-.4Zm-7-9a9.7 9.7 0 0 0-1 .1 1 1 0 0 0-.3.4v.2l.1.5.8 2.4.4-.4.3-.4.2-.4-.1-.6-.3-1.7h-.1Z" fill="#6c7a87"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.3.3a14.7 14.7 0 1 1-6.6 27.8h-.3l-1 .2-5 1.3A1.3 1.3 0 0 1 .6 28L2 23l.2-1v-.3l-.5-1A14.6 14.6 0 0 1 15.3.3Zm0 2.7a12 12 0 0 0-11 16.7l.4 1 .3 1c0 .7-.2 1.3-.4 2L4 26.3l3.3-.8c.5-.2 1-.3 1.4-.2H9l.7.2 1 .5a12 12 0 0 0 16.7-11 12 12 0 0 0-12-12Z" fill="#6c7a87"/></svg>
        <div class="fw-bold">Contáctame</div>
      </div>
    </div>
  </div>
</a>

<style>
  .boton_rgb {
    background-color: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 2px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  .contenido_btn_rgb {
    position: relative;
    z-index: 2;
    background: black;
    color: white;
  }
  .sombra_bola_rgb {
    width: 100px;
    height: 100px;
    border-radius: 100%;
    position: absolute;
    background-position: center center;
    background-image: linear-gradient(
      90deg,
      #ff0000,
      #00ffa6,
      #0084ff,
      #a200ff,
      #ffaa00
    );
    filter: blur(60px);
  }
  .bola_rgb {
    width: 50px;
    height: 50px;
    border-radius: 100%;
    position: absolute;
    background-position: center center;
    background: linear-gradient(90deg,rgb(255, 0, 200) 0%, rgb(0, 236, 253) 100%);
    filter: blur(6px);
  }

  .contenedor_borde_rgb {
    position: relative;
  }

  .borde_rgb {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible;
  }
  .btn_contact {
    position: fixed;
    bottom: 12px;
    right: 12px;
    z-index: 999;
    border-radius: 8px;
    transform: translateX(100vw);
  }
</style>

<script>
  function updateBorderPath(cardEl) {
    const svg = cardEl.querySelector("svg");
    const path = svg.querySelector("path");
    const rect = cardEl.getBoundingClientRect();
    const borderRadius = parseFloat(getComputedStyle(cardEl).borderRadius) || 0;

    svg.setAttribute("viewBox", `0 0 ${rect.width} ${rect.height}`);
    svg.setAttribute("width", rect.width);
    svg.setAttribute("height", rect.height);

    const d = `
        M${borderRadius},0
        H${rect.width - borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 ${rect.width},${borderRadius}
        V${rect.height - borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 ${rect.width - borderRadius},${rect.height}
        H${borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 0,${rect.height - borderRadius}
        V${borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 ${borderRadius},0
        Z
      `;

    path.setAttribute("d", d);
  }

  // Llamalo después de que el elemento esté montado
  document.querySelectorAll(".contenedor_borde_rgb").forEach((card) => {
    updateBorderPath(card);
    window.addEventListener("resize", () => updateBorderPath(card));
  });
</script>

<script>
  import { gsap } from "gsap";
  import { DrawSVGPlugin } from "gsap/DrawSVGPlugin";
  import { MotionPathPlugin } from "gsap/MotionPathPlugin";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(DrawSVGPlugin);
  gsap.registerPlugin(MotionPathPlugin);
	gsap.registerPlugin(ScrollTrigger);

  gsap.to(".animacion_rgb", {
    duration: 5,
    repeat: -1,
    ease: "linear",
    motionPath: {
      path: "#path",
      align: "#path",
      autoRotate: false,
      alignOrigin: [0.5, 0.5],
    },
  });

  gsap.to(".btn_contact", {
		scrollTrigger: {
			trigger: ".mascara_divider_1",
			start: "top top",
			end: "25% 10% ",
			scrub: 4,
			//markers: true,
		},
    x: "0vw",
	});

</script>
