<a
  href="https://api.whatsapp.com/send?phone=51945692831"
  class="btn_contact"
  target="_blank"
>
  <div class="animacion_rgb sombra_bola_rgb"></div>
  <div class="rounded overflow-hidden boton_rgb">
    <div class="contenedor_borde_rgb">
      <svg class="borde_rgb" xmlns="http://www.w3.org/2000/svg">
        <path id="path" fill="none" stroke="transparent" stroke-width="2"
        ></path>
      </svg>
      <div id="rect" class="animacion_rgb bola_rgb"></div>
      <div
        class="py-3 px-4 contenido_btn_rgb rounded d-flex gap-2 align-items-center justify-content-center"
      >
        <!-- contenido aquí -->
        <i class="hgi hgi-stroke hgi-whatsapp fs-3 text-body"></i>
        <div class="fw-bold">Contáctame</div>
      </div>
    </div>
  </div>
</a>

<style>
  .boton_rgb {
    background-color: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 2px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  .contenido_btn_rgb {
    position: relative;
    z-index: 2;
    background: black;
    color: white;
  }
  .sombra_bola_rgb {
    width: 100px;
    height: 100px;
    border-radius: 100%;
    position: absolute;
    background-position: center center;
    background-image: linear-gradient(
      90deg,
      #ff0000,
      #00ffa6,
      #0084ff,
      #a200ff,
      #ffaa00
    );
    filter: blur(60px);
  }
  .bola_rgb {
    width: 50px;
    height: 50px;
    border-radius: 100%;
    position: absolute;
    background-position: center center;
    background: linear-gradient(90deg,rgb(255, 0, 200) 0%, rgb(0, 236, 253) 100%);
    filter: blur(6px);
  }

  .contenedor_borde_rgb {
    position: relative;
  }

  .borde_rgb {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible;
  }
  .btn_contact {
    position: relative;
    z-index: 999;
    border-radius: 8px;
  }
</style>

<script>
  function updateBorderPath(cardEl) {
    const svg = cardEl.querySelector("svg");
    const path = svg.querySelector("path");
    const rect = cardEl.getBoundingClientRect();
    const borderRadius = parseFloat(getComputedStyle(cardEl).borderRadius) || 0;

    svg.setAttribute("viewBox", `0 0 ${rect.width} ${rect.height}`);
    svg.setAttribute("width", rect.width);
    svg.setAttribute("height", rect.height);

    const d = `
        M${borderRadius},0
        H${rect.width - borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 ${rect.width},${borderRadius}
        V${rect.height - borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 ${rect.width - borderRadius},${rect.height}
        H${borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 0,${rect.height - borderRadius}
        V${borderRadius}
        A${borderRadius},${borderRadius} 0 0 1 ${borderRadius},0
        Z
      `;

    path.setAttribute("d", d);
  }

  // Llamalo después de que el elemento esté montado
  document.querySelectorAll(".contenedor_borde_rgb").forEach((card) => {
    updateBorderPath(card);
    window.addEventListener("resize", () => updateBorderPath(card));
  });
</script>

<script>
  import { gsap } from "gsap";
  import { DrawSVGPlugin } from "gsap/DrawSVGPlugin";
  import { MotionPathPlugin } from "gsap/MotionPathPlugin";
  gsap.registerPlugin(DrawSVGPlugin);
  gsap.registerPlugin(MotionPathPlugin);

  gsap.to(".animacion_rgb", {
    duration: 5,
    repeat: -1,
    ease: "linear",
    motionPath: {
      path: "#path",
      align: "#path",
      autoRotate: false,
      alignOrigin: [0.5, 0.5],
    },
  });

</script>
